<source>
  @type tail
  path "/datasets/query.json"
  pos_file "/fluentd/log/test.pos"
  tag "query.json.input"
  read_from_head true
  <parse>
      @type json
  </parse>
</source>

<match query.json.input>
  @type couch
  host couchdb
  port 5984
  database paperllm
  user admin
  password yourpassword
  url "http://admin:yourpassword@couchdb:5984/paperllm"
  <buffer>
    flush_interval 5s
  </buffer>
  <inject>
    source ${tag}
  </inject>
</match>
