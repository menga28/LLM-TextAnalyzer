<source>
  @type tail
  path ../datasets/content.xml
  pos_file /fluentd/log/content.pos
  tag dataset.content
  
  <parse>
    @type xml
    xpath //*
    time_xpath "//*[1]"  # Indica un percorso XML generico come fittizio
    time_format %Y-%m-%dT%H:%M:%S%z  # Formato di tempo standard
  </parse>
</source>

<source>
  @type tail
  path ../datasets/query.xml
  pos_file /fluentd/log/query.pos
  tag dataset.query
  
  <parse>
    @type xml
    xpath //question/question
    time_xpath "//*[1]"  # Usa un percorso fittizio come timestamp
    time_format %Y-%m-%dT%H:%M:%S%z
  </parse>
</source>

<source>
  @type tail
  path ../datasets/result.xml
  pos_file /fluentd/log/result.pos
  tag dataset.result
  
  <parse>
    @type xml
    xpath //results/result
    time_xpath "//*[1]"  # Usa un percorso fittizio
    time_format %Y-%m-%dT%H:%M:%S%z
  </parse>
</source>

<match dataset.content>
  @type arangodb
  database _system
  collection content
  host arangodb
  port 8529
  user root
  password your_password  # Sostituisci con la password del tuo utente
  <buffer>
    @type memory
    flush_interval 5s
  </buffer>
</match>

<match dataset.query>
  @type arangodb
  database _system
  collection query
  host arangodb
  port 8529
  user root
  password your_password  # Sostituisci con la password del tuo utente
  <buffer>
    @type memory
    flush_interval 5s
  </buffer>
</match>

<match dataset.result>
  @type arangodb
  database _system
  collection result
  host arangodb
  port 8529
  user root
  password your_password  # Sostituisci con la password del tuo utente
  <buffer>
    @type memory
    flush_interval 5s
  </buffer>
</match>
